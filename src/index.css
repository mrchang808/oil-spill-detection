@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Primary Colors */
    --primary: 217 91% 60%;
    --primary-dark: 217 91% 50%;
    --primary-light: 217 91% 70%;
    
    /* Secondary Colors */
    --secondary: 142 76% 36%;
    --secondary-dark: 142 76% 26%;
    
    /* Accent Colors */
    --accent: 47 96% 53%;
    --danger: 0 84% 60%;
    --warning: 38 92% 50%;
    --success: 142 76% 36%;
    --info: 199 89% 48%;
    
    /* Neutral Colors */
    --background: 0 0% 100%;
    --foreground: 222 47% 11%;
    --muted: 210 40% 96.1%;
    --muted-foreground: 215.4 16.3% 46.9%;
    
    /* Border & Ring */
    --border: 214.3 31.8% 91.4%;
    --ring: 217 91% 60%;
    
    /* Semantic Colors for Oil Spills */
    --oil-spill: 0 84% 60%;
    --non-oil-spill: 142 76% 36%;
    --critical: 0 100% 50%;
    
    /* Shadows */
    --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
    --shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
    --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
    --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
    --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
  }

  /* Dark Mode */
  .dark {
    --primary: 217 91% 60%;
    --background: 222 47% 11%;
    --foreground: 210 40% 98%;
    --muted: 217.2 32.6% 17.5%;
    --muted-foreground: 215 20.2% 65.1%;
    --border: 217.2 32.6% 17.5%;
  }

  /* Base Styles */
  * {
    /* don't apply non-existent tailwind utilities globally.
       use sensible resets instead */
    box-sizing: border-box;
    margin: 0;
    padding: 0;
  }

  /* Use CSS variables directly instead of non-existent utilities like bg-background / text-foreground */
  body {
    background-color: hsl(var(--background));
    color: hsl(var(--foreground));
    font-feature-settings: "rlig" 1, "calt" 1;
  }
}

/* ============================================
   CUSTOM COMPONENTS
   ============================================ */
@layer components {
  /* Glassmorphism Effects */
  .glass-card {
    @apply bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl border border-white/20 shadow-xl;
  }

  .glass-nav {
    @apply bg-white/70 dark:bg-gray-900/70 backdrop-blur-lg border-b border-white/20;
  }

  /* Enhanced Cards */
  .card {
    @apply bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700;
  }

  .card-hover {
    @apply card transition-all duration-300 hover:shadow-xl hover:-translate-y-1 hover:scale-[1.02];
  }

  /* Buttons */
  .btn {
    @apply px-4 py-2 rounded-lg font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2;
  }

  .btn-primary {
    @apply btn bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500 active:scale-95;
  }

  .btn-secondary {
    @apply btn bg-gray-600 text-white hover:bg-gray-700 focus:ring-gray-500 active:scale-95;
  }

  .btn-danger {
    @apply btn bg-red-600 text-white hover:bg-red-700 focus:ring-red-500 active:scale-95;
  }

  .btn-success {
    @apply btn bg-green-600 text-white hover:bg-green-700 focus:ring-green-500 active:scale-95;
  }

  .btn-ghost {
    @apply btn bg-transparent hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-700 dark:text-gray-300;
  }

  /* Inputs */
  .input {
    @apply w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg 
           focus:ring-2 focus:ring-blue-500 focus:border-transparent 
           bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100
           placeholder:text-gray-400 dark:placeholder:text-gray-500
           transition-all duration-200;
  }

  /* Badges */
  .badge {
    @apply inline-flex items-center px-3 py-1 rounded-full text-xs font-medium;
  }

  .badge-oil-spill {
    @apply badge bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300;
  }

  .badge-non-oil-spill {
    @apply badge bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300;
  }

  .badge-critical {
    @apply badge bg-red-200 text-red-900 dark:bg-red-900/50 dark:text-red-200;
  }

  .badge-high {
    @apply badge bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300;
  }

  .badge-medium {
    @apply badge bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300;
  }

  .badge-low {
    @apply badge bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300;
  }

  /* Loading Spinner */
  .spinner {
    @apply animate-spin rounded-full border-4 border-gray-200 border-t-blue-600;
  }

  .spinner-sm {
    @apply spinner w-4 h-4 border-2;
  }

  .spinner-md {
    @apply spinner w-8 h-8;
  }

  .spinner-lg {
    @apply spinner w-12 h-12 border-4;
  }

  /* Focus Ring */
  .focus-ring {
    @apply focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-gray-900;
  }

  /* Custom Scrollbar */
  .custom-scrollbar::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  .custom-scrollbar::-webkit-scrollbar-track {
    @apply bg-gray-100 dark:bg-gray-800 rounded-full;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb {
    @apply bg-gray-400 dark:bg-gray-600 rounded-full hover:bg-gray-500 dark:hover:bg-gray-500;
  }

  /* Gradient Text */
  .gradient-text {
    @apply bg-gradient-to-r from-blue-600 to-cyan-600 bg-clip-text text-transparent;
  }

  /* Status Indicator */
  .status-online {
    @apply relative inline-flex h-3 w-3 rounded-full bg-green-500;
  }

  .status-online::before {
    content: '';
    @apply absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75 animate-ping;
  }
}

/* ============================================
   ANIMATIONS
   ============================================ */
@layer utilities {
  /* Fade In */
  @keyframes fadeIn {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  .animate-fade-in {
    animation: fadeIn 0.5s ease-out;
  }

  /* Slide In Animations */
  @keyframes slideInRight {
    from {
      transform: translateX(100%);
      opacity: 0;
    }
    to {
      transform: translateX(0);
      opacity: 1;
    }
  }

  @keyframes slideInLeft {
    from {
      transform: translateX(-100%);
      opacity: 0;
    }
    to {
      transform: translateX(0);
      opacity: 1;
    }
  }

  @keyframes slideInUp {
    from {
      transform: translateY(100%);
      opacity: 0;
    }
    to {
      transform: translateY(0);
      opacity: 1;
    }
  }

  @keyframes slideInDown {
    from {
      transform: translateY(-100%);
      opacity: 0;
    }
    to {
      transform: translateY(0);
      opacity: 1;
    }
  }

  .animate-slide-in-right {
    animation: slideInRight 0.3s ease-out;
  }

  .animate-slide-in-left {
    animation: slideInLeft 0.3s ease-out;
  }

  .animate-slide-in-up {
    animation: slideInUp 0.3s ease-out;
  }

  .animate-slide-in-down {
    animation: slideInDown 0.3s ease-out;
  }

  /* Scale In */
  @keyframes scaleIn {
    from {
      transform: scale(0.9);
      opacity: 0;
    }
    to {
      transform: scale(1);
      opacity: 1;
    }
  }

  .animate-scale-in {
    animation: scaleIn 0.2s ease-out;
  }

  /* Pulse Ring Animation (for markers) */
  @keyframes pulseRing {
    0% {
      transform: scale(0.8);
      opacity: 1;
    }
    50% {
      transform: scale(1.2);
      opacity: 0.5;
    }
    100% {
      transform: scale(0.8);
      opacity: 1;
    }
  }

  .animate-pulse-ring {
    animation: pulseRing 2s cubic-bezier(0.455, 0.03, 0.515, 0.955) infinite;
  }

  /* Shimmer Effect (for loading) */
  @keyframes shimmer {
    0% {
      background-position: -1000px 0;
    }
    100% {
      background-position: 1000px 0;
    }
  }

  .animate-shimmer {
    background: linear-gradient(to right, #f6f7f8 0%, #edeef1 20%, #f6f7f8 40%, #f6f7f8 100%);
    background-size: 1000px 100%;
    animation: shimmer 2s linear infinite;
  }

  /* Shake Animation (for errors) */
  @keyframes shake {
    0%, 100% {
      transform: translateX(0);
    }
    10%, 30%, 50%, 70%, 90% {
      transform: translateX(-5px);
    }
    20%, 40%, 60%, 80% {
      transform: translateX(5px);
    }
  }

  .animate-shake {
    animation: shake 0.5s ease-in-out;
  }

  /* Bounce Subtle */
  @keyframes bounceSubtle {
    0%, 100% {
      transform: translateY(0);
    }
    50% {
      transform: translateY(-10px);
    }
  }

  .animate-bounce-subtle {
    animation: bounceSubtle 1s ease-in-out infinite;
  }
}

/* ============================================
   MOBILE OPTIMIZATIONS
   ============================================ */
@media (max-width: 768px) {
  /* Sidebar */
  .sidebar {
    @apply fixed inset-y-0 left-0 z-50 w-80 transform transition-transform duration-300 ease-in-out;
  }

  .sidebar-hidden {
    @apply -translate-x-full;
  }

  .sidebar-visible {
    @apply translate-x-0;
  }

  /* Map Container */
  .map-container {
    @apply h-[60vh] rounded-lg overflow-hidden;
  }

  /* Touch Targets */
  button,
  a,
  input[type="checkbox"],
  input[type="radio"] {
    min-height: 44px;
    min-width: 44px;
  }

  /* Mobile Navigation */
  .mobile-nav {
    @apply fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700 z-40;
  }

  /* Reduce Motion */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }
}

/* ============================================
   TABLET OPTIMIZATIONS
   ============================================ */
@media (min-width: 768px) and (max-width: 1024px) {
  .sidebar {
    @apply w-64;
  }

  .map-container {
    @apply h-[70vh];
  }
}

/* ============================================
   PRINT STYLES
   ============================================ */
@media print {
  .no-print {
    display: none !important;
  }

  .print-full-width {
    width: 100% !important;
  }

  body {
    @apply text-black bg-white;
  }

  .card {
    @apply border border-black;
  }
}

/* ============================================
   ACCESSIBILITY
   ============================================ */

/* High Contrast Mode */
@media (prefers-contrast: high) {
  .card {
    @apply border-2;
  }

  button {
    @apply border-2 border-black;
  }
}

/* Skip to Content Link */
.skip-to-content {
  @apply absolute -top-10 left-0 bg-blue-600 text-white px-4 py-2 rounded-lg 
         focus:top-0 focus:left-4 z-[9999] transition-all;
}

/* Screen Reader Only */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

/* Focus Visible (for keyboard navigation) */
.focus-visible:focus {
  @apply outline-none ring-2 ring-blue-500 ring-offset-2;
}

/* ============================================
   DARK MODE TRANSITIONS
   ============================================ */
* {
  @apply transition-colors duration-200;
}

/* Disable transitions on theme change for smoother experience */
.theme-transition-disable * {
  transition: none !important;
}
